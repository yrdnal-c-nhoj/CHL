import{r as o,j as n}from"./index-37WBs3jL.js";const y="/assets/birds-_nYXPDLp.webp",z="/assets/twobirds-B5nt-I-F.ttf";function Y(){const v="CustomClockFont",[j,R]=o.useState(null),[I,k]=o.useState(null),[l,x]=o.useState(null),[f,g]=o.useState({left:!1,right:!1}),[U,d]=o.useState(!1),[m,B]=o.useState(!1),a=o.useRef({left:null,right:null,font:null}),u=o.useRef(null),[F,O]=o.useState(""),$=e=>{let t=e.getHours();const s=e.getMinutes(),r=t>=12?"PM":"AM";t=t%12,t===0&&(t=12);const i=String(s).padStart(2,"0");return`${t}${i} ${r}`};o.useEffect(()=>{const e=()=>O($(new Date));e();const t=new Date,s=(60-t.getSeconds())*1e3-t.getMilliseconds();let r=null;const i=setTimeout(()=>{e(),r=setInterval(e,6e4)},Math.max(0,s));return()=>{clearTimeout(i),r&&clearInterval(r)}},[]),o.useEffect(()=>{let e=!1;return(async()=>{try{const t=await fetch(y,{cache:"no-store"}),s=await t.arrayBuffer(),r=t.headers.get("content-type")||"image/gif",i=new Blob([s],{type:r}),h=new Blob([s],{type:r}),c=URL.createObjectURL(i),p=URL.createObjectURL(h),L=await fetch(z,{cache:"no-store"}),C=await L.arrayBuffer(),D=L.headers.get("content-type")||"font/ttf",A=new Blob([C],{type:D}),b=URL.createObjectURL(A);if(e){URL.revokeObjectURL(c),URL.revokeObjectURL(p),URL.revokeObjectURL(b);return}a.current={left:c,right:p,font:b},R(c),k(p),x(b),g({left:!0,right:!1}),u.current=setTimeout(()=>{e||(g({left:!0,right:!0}),m&&d(!0))},500)}catch(t){console.error("Fetch failed, using direct URLs:",t),R(`${y}?l=${Date.now()}`),k(`${y}?r=${Date.now()}`),g({left:!0,right:!1}),x(null),u.current=setTimeout(()=>{e||(g({left:!0,right:!0}),m&&d(!0))},500)}})(),()=>{e=!0,u.current&&clearTimeout(u.current),a.current.left&&URL.revokeObjectURL(a.current.left),a.current.right&&URL.revokeObjectURL(a.current.right),a.current.font&&URL.revokeObjectURL(a.current.font)}},[m]);const w={position:"absolute",top:0,height:"100%",width:"100%",objectFit:"cover",objectPosition:"top center",pointerEvents:"none",transition:"opacity 0ms"},M={position:"absolute",bottom:"2vh",left:0,right:0,textAlign:"center",zIndex:4,fontFamily:l?`"${v}", Menlo, Monaco, Consolas, monospace`:"Menlo, Monaco, Consolas, monospace",fontWeight:900,fontSize:"10vh",lineHeight:1,letterSpacing:"0.6vh",opacity:.9,userSelect:"none",textShadow:"0.6vh 1vh 2vh rgba(0,0,0,0.7)",transform:"perspective(80vh) rotateX(10deg) rotateY(-5deg) scale(1.02)",transformOrigin:"center bottom"},S={display:"inline-block",padding:"0 0.05em",backgroundImage:["linear-gradient(135deg, #bbbfc3 0%, #8e9499 100%)","radial-gradient(circle at 25% 30%, rgba(255,255,255,0.20) 0%, transparent 35%)","radial-gradient(circle at 70% 60%, rgba(0,0,0,0.40) 0%, transparent 45%)","radial-gradient(circle at 40% 80%, rgba(120,120,120,0.25) 0%, transparent 30%)","linear-gradient(to top, rgba(255,255,255,0.10), rgba(0,0,0,0) 60%)"].join(", "),WebkitBackgroundClip:"text",backgroundClip:"text",WebkitTextFillColor:"transparent",textShadow:["1.7vh 1.8vh 0 rgba(0,0,0,0.9)","0.28vh 0.28vh 0 rgba(255,255,255,0.6)","-0.2vh -0.2vh 0 rgba(0,0,0,0.65)","0 1.6vh 2.8vh rgba(0,0,0,0.9)"].join(", "),filter:"saturate(0.85) contrast(1.1)",opacity:.8,animation:"digitFade 1s ease forwards"},T={display:"inline-block",opacity:.6,padding:"0 0.05em"};return n.jsxs("div",{style:{width:"100vw",height:"100dvh",position:"relative",overflow:"hidden"},children:[l&&n.jsx("style",{children:`
            @font-face {
              font-family: "${v}";
              src: url("${l}") format("truetype");
              font-weight: 900;
              font-style: normal;
              font-display: swap;
            }
            @keyframes digitFade {
              from { opacity: 0; -webkit-text-fill-color: black; }
              to { opacity: 0.8; -webkit-text-fill-color: transparent; }
            }
          `}),n.jsx("img",{src:j||void 0,alt:"background",style:{...w,opacity:f.left?1:0,zIndex:1}}),n.jsx("img",{src:I||void 0,alt:"reversed background",onLoad:()=>{B(!0),f.right&&d(!0)},style:{...w,opacity:f.right?.5:0,transform:"scaleX(-1)",zIndex:1}}),l&&f.right&&n.jsx("div",{style:M,children:Array.from(F).map((e,t)=>{if(!/[0-9A-Za-z]/.test(e))return n.jsx("span",{style:T,children:e},t);const r=(Math.random()*4-2).toFixed(2),i=(Math.random()*.2-.1).toFixed(2),h=(.95+Math.random()*.1).toFixed(2),c={...S,transform:`translateY(${i}em) rotate(${r}deg)`,filter:`${S.filter} brightness(${h})`};return n.jsx("span",{style:c,children:e},t)})}),n.jsx("div",{style:{position:"absolute",inset:0,backgroundColor:"#000",zIndex:10,pointerEvents:"none",opacity:U?0:1,transition:"opacity 0.2s ease-in"}})]})}export{Y as default};
