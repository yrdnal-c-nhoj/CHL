import{r as d,j as a}from"./index-_Zh6IFgu.js";const A=()=>{const[l,j]=d.useState(new Date),[$,D]=d.useState({lat:40.7128,lon:-74.006});d.useEffect(()=>{const t=setInterval(()=>j(new Date),1e3);return()=>clearInterval(t)},[]),d.useEffect(()=>{(async()=>{try{const e=await fetch("https://ipapi.co/json/");if(!e.ok)throw new Error("IP Geolocation failed");const i=await e.json();D({lat:i.latitude,lon:i.longitude})}catch(e){console.error("Could not fetch IP location; using default NYC.",e)}})()},[]);const T=(t,e,i)=>{const o=Math.PI/180,u=(357.5291+.98560028*(Math.floor(t.getTime()/864e5)-10957.5-i/360))%360,v=1.9148*Math.sin(u*o)+.02*Math.sin(2*u*o),H=(u+v+180+102.9372)%360,w=Math.asin(Math.sin(H*o)*Math.sin(23.44*o))/o,y=Math.acos((Math.sin(-.833*o)-Math.sin(e*o)*Math.sin(w*o))/(Math.cos(e*o)*Math.cos(w*o)))/o,x=720-4*i-v*4,L=x-y*4,N=x+y*4,S=new Date(t);S.setHours(0,L,0,0);const M=new Date(t);return M.setHours(0,N,0,0),{sunrise:S,sunset:M}},{lat:C,lon:P}=$,f=T(l,C,P),r=f.sunrise,g=f.sunset,h=g.getTime()-r.getTime(),p=1440*60*1e3,n=Math.max(20,Math.min(80,h/p*100)),c=l.getTime();let s;if(c<r.getTime()){const t=new Date(r);t.setHours(t.getHours()-(24-h/(3600*1e3)));const e=r.getTime()-t.getTime();s=(c-t.getTime())/e*(100-n)}else if(c>=r.getTime()&&c<=g.getTime()){const t=(c-r.getTime())/h;s=100-n+t*n}else{const t=p-h;s=(c-g.getTime())/t*(100-n)}const k=`linear-gradient(to bottom, #fbbf24 0% ${s}%, #1e3a8a ${s}% 100%)`,m=String(l.getHours()).padStart(2,"0"),b=String(l.getMinutes()).padStart(2,"0"),I=[m[0],m[1]],E=[b[0],b[1]];return a.jsxs("div",{style:{height:"100vh",width:"100vw",position:"fixed",top:0,left:0,overflow:"hidden",background:k,transition:"background 1s ease-in-out"},children:[a.jsx("div",{style:{position:"absolute",top:`calc(${s}vh - ${15*(n/100)}vh)`,left:"15vw",width:`${30*(n/100)}vh`,height:`${30*(n/100)}vh`,backgroundColor:"#fcd34d",borderRadius:"50%",boxShadow:`0 0 ${80*(n/100)}px #fcd34d`,opacity:.95}}),a.jsx("div",{style:{position:"absolute",top:`calc(${s}vh - ${12*((100-n)/100)}vh)`,right:"15vw",width:`${24*((100-n)/100)}vh`,height:`${24*((100-n)/100)}vh`,backgroundColor:"#e0e7ff",borderRadius:"50%",boxShadow:`0 0 ${70*((100-n)/100)}px #93c5fd`,opacity:.95}}),a.jsx("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",display:"flex",alignItems:"center",gap:"0.5vw",fontSize:"6vh",fontWeight:"bold",padding:"1vh 2vw",borderRadius:"1vh",pointerEvents:"none",userSelect:"none",backgroundColor:"rgba(0,0,0,0.2)",boxShadow:"0 0 20px rgba(0,0,0,0.2)",overflow:"hidden"},children:[...I,":",...E].map((t,e)=>a.jsxs("div",{style:{position:"relative",width:t===":"?"0.5em":"1em",height:"1em",display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden"},children:[a.jsx("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:`${s}%`,background:"linear-gradient(to bottom, #fbbf24, #fbbf24)",color:"#1e3a8a",display:"flex",alignItems:"center",justifyContent:"center",fontFamily:"monospace",textShadow:"0 0 10px rgba(255,255,255,0.5)"},children:t}),a.jsx("div",{style:{position:"absolute",bottom:0,left:0,width:"100%",height:`${100-s}%`,background:"linear-gradient(to bottom, #1e3a8a, #1e3a8a)",color:"#fbbf24",display:"flex",alignItems:"center",justifyContent:"center",fontFamily:"monospace",textShadow:"0 0 10px rgba(255,255,255,0.5)"},children:t})]},`char-${e}`))}),[...Array(25)].map((t,e)=>{const i=e/24*100,o=e===l.getHours();return a.jsxs("div",{style:{position:"absolute",left:"2vw",top:`${i}vh`,transform:"translateY(-50%)",display:"flex",alignItems:"center",gap:"0.5vw",pointerEvents:"none",userSelect:"none"},children:[a.jsx("div",{style:{width:o?"3vw":"2vw",height:"2px",backgroundColor:i<s?"#1e3a8a":"#fbbf24",opacity:o?1:.6}}),a.jsxs("div",{style:{fontSize:o?"2.5vh":"2vh",fontWeight:o?"bold":"normal",fontFamily:"monospace",color:i<s?"#1e3a8a":"#fbbf24",textShadow:"0 0 10px rgba(0,0,0,0.3)",opacity:o?1:.7},children:[String(e).padStart(2,"0"),":00"]})]},`hour-${e}`)})]})};export{A as default};
