import{r as t,j as m}from"./index-37WBs3jL.js";const E="/assets/ntp-BgpNVDgz.ttf",F="/assets/n2-CyVh6Qvm.ttf",T="/assets/npt-CysgCJRm.webp",b=2208988800,v=1e3,D=86400;function A(){const[a,n]=t.useState(0),[r,i]=t.useState(!1);return t.useEffect(()=>{let o=!0;return(async()=>{try{const c=performance.now(),h=await(await fetch("https://worldtimeapi.org/api/timezone/Etc/UTC")).json(),p=performance.now();if(!o)return;const g=(p-c)/2,y=new Date(h.utc_datetime).getTime()-(Date.now()+g);n(y),i(!0)}catch(c){o&&(console.error("Failed to load NTP time:",c),i(!0))}})(),()=>{o=!1}},[]),{offset:a,isSynced:r}}const M=a=>{const n=a%D,r=Math.floor(n/3600),i=Math.floor(n%3600/60),o=n%60,d=o*6-90,c=i*6+o*.1-90,u=r%12*30+i*.5-90;return{secAngle:d,minAngle:c,hourAngle:u}},j=a=>Array.from({length:a},()=>{const n=Math.random()*360,r=(n+180)%360;return{color:`hsl(${n}, 200%, 50%)`,shadowColor:`hsl(${r}, 200%, 60%)`}});function z(){const{offset:a,isSynced:n}=A(),[r,i]=t.useState(0),[o,d]=t.useState([]),[c,u]=t.useState(0),[h,p]=t.useState(new Date().toLocaleString([],{timeZoneName:"short"})),g=t.useRef(null);t.useLayoutEffect(()=>{const s=`
      @font-face {
        font-family: 'ClockFont';
        src: url('${E}') format('woff2');
        font-style: normal;
        font-display: swap;
      }
      @font-face {
        font-family: 'MarqueeFont';
        src: url('${F}') format('truetype');
        font-style: normal;
        font-display: swap;
      }
    `,e=document.createElement("style");return e.id="dynamic-fonts",e.innerHTML=s,document.head.appendChild(e),()=>{const l=document.getElementById("dynamic-fonts");l&&document.head.removeChild(l)}},[]),t.useEffect(()=>{if(!n)return;const s=()=>{const l=Date.now()+a,w=Math.floor(l/v)+b;i(w),d(j(String(w).length)),p(new Date().toLocaleString([],{timeZoneName:"short"}))};s();const e=setInterval(s,v);return()=>clearInterval(e)},[n,a]),t.useEffect(()=>{let s;const e=()=>{u(l=>l+.7),s=requestAnimationFrame(e)};return s=requestAnimationFrame(e),()=>cancelAnimationFrame(s)},[]);const f=window.innerHeight>window.innerWidth,y=t.useMemo(()=>({width:"100vw",height:"100vh",display:"flex",justifyContent:"center",alignItems:"center",backgroundColor:"#111",backgroundImage:`
      url(${T}),
      linear-gradient(to right, rgba(200,200,200,0.05) 0.1vh, transparent 0.1vh),
      linear-gradient(to bottom, rgba(200,200,200,0.05) 0.1vh, transparent 0.1vh)
    `,backgroundSize:"25vh 15vh, 25vh 15vh, 25vh 15vh",backgroundPosition:"center",filter:"invert(1) saturate(7)",overflow:"hidden",position:"relative"}),[]),S={fontFamily:"ClockFont, monospace",textAlign:"center"},x=t.useMemo(()=>({...S,fontSize:f?"13vh":"15vh",lineHeight:"0.75",display:"flex",flexDirection:f?"column":"row",alignItems:"center",justifyContent:"center",zIndex:2}),[f]),C=Array(10).fill("{{time}} NTP, or Network Time Protocol, is a system that keeps computersâ€™ clocks accurate by checking the time from trusted servers and adjusting them as needed. ").join(" "),k={position:"absolute",whiteSpace:"nowrap",fontSize:"49vh",fontFamily:"MarqueeFont, serif, sans-serif",color:"#110101FF",textShadow:"#6EE612FF 1px 0",zIndex:1,pointerEvents:"none",...f?{top:"50%",left:`${100-c}vw`,transform:"translate(-50%, -50%)"}:{left:"50%",top:`${100-c}vh`,transform:"translate(-50%, 0) rotate(90deg)"}},{secAngle:P,minAngle:$,hourAngle:q}=t.useMemo(()=>M(r),[r]);return m.jsxs("div",{style:y,children:[m.jsx("div",{style:x,children:n?String(r).split("").map((s,e)=>m.jsx("span",{style:{color:o[e]?.color||"#00ffff",textShadow:`1.0vh 0 0 ${o[e]?.shadowColor||"#00ffff"}, -1.0vh 0 0 ${o[e]?.shadowColor||"#00ffff"}, 1.1vh 0 0 ${o[e]?.shadowColor||"#00ffff"}, -1.1vh 0 0 ${o[e]?.shadowColor||"#00ffff"}, 1px 0 black, 0 -1px 0 black, 1px 0 0 black, -1px 0 0 black`},children:s},e)):m.jsx("span",{style:{fontSize:"6vh",opacity:0},children:"Syncing..."})}),m.jsx("div",{ref:g,style:k,children:C.replace(/\{\{time\}\}/g,h)})]})}export{z as default};
