import{r as h,j as I}from"./index-DhGayC4d.js";const C="/assets/rain-_HeRUeLJ.ttf";function T(){const w=h.useRef(null),p=h.useRef(null),o=h.useRef([]),M=.15,D=.01,S=.4,F=8,m=[25,50],R="#BDE4F0FF",g=h.useRef(null);h.useEffect(()=>{const n=()=>{const r=new Date;let d=r.getHours()%12||12,v=r.getMinutes();o.current=`${d}${v.toString().padStart(2,"0")}`.split("")};n();const _=setInterval(n,6e4);return()=>clearInterval(_)},[]),h.useEffect(()=>{const n=w.current;if(!n)return;g.current=n.getContext("2d",{alpha:!1}),new FontFace("DigitFont_25_10_09",`url(${C})`).load().then(e=>document.fonts.add(e));class r{constructor(t=0,i=0){this.x=t,this.y=i}add(t){return this.x+=t.x,this.y+=t.y,this}}class d{constructor(t,i){this.value=t,this.pos=new r(Math.random()*i,-10),this.vel=new r(0,Math.random()*1+.5),this.fontSize=Math.random()*2+2.5,this.alpha=1}update(){this.vel.y+=M*.2,this.vel.x+=D,this.pos.add(this.vel)}draw(t){t.globalAlpha=this.alpha,t.fillStyle="#0A0A0A",t.font=`${this.fontSize}rem "DigitFont_25_10_09"`,t.fillText(this.value,this.pos.x,this.pos.y)}}class v{constructor(t,i,s){const a=Math.random()*Math.PI*2,f=Math.random()*12+6;this.pos=new r(t,i),this.vel=new r(Math.cos(a)*f,Math.sin(a)*f),this.val=s,this.alpha=1,this.size=Math.random()*.8+.5,this.rotation=Math.random()*2*Math.PI,this.rotationSpeed=(Math.random()-.5)*.3}update(){this.vel.y+=M*.3,this.vel.x*=.93,this.vel.y*=.93,this.pos.add(this.vel),this.rotation+=this.rotationSpeed,this.alpha-=.02}draw(t){t.save(),t.translate(this.pos.x,this.pos.y),t.rotate(this.rotation),t.globalAlpha=Math.max(0,this.alpha),t.fillStyle="#000",t.font=`${this.size}rem "DigitFont_25_10_09"`,t.fillText(this.val,0,0),t.restore()}}const l=()=>{const e=Math.max(1,window.devicePixelRatio||1),t=Math.floor(n.clientWidth*e),i=Math.floor(n.clientHeight*e);(n.width!==t||n.height!==i)&&(n.width=t,n.height=i,g.current.setTransform(e,0,0,e,0,0))},c=[],u=[],A=()=>{const e=g.current,t=n.clientWidth,i=n.clientHeight;e.fillStyle=R,e.fillRect(0,0,t,i),e.save(),e.textAlign="center";for(let s=c.length-1;s>=0;s--){const a=c[s];if(a.update(),a.pos.y>=i){const f=Math.floor(Math.random()*(m[1]-m[0]+1))+m[0];for(let y=0;y<f;y++){const E=o.current[Math.floor(Math.random()*o.current.length)];u.push(new v(a.pos.x,i,E))}c.splice(s,1)}else a.draw(e)}for(let s=u.length-1;s>=0;s--){const a=u[s];a.update(),a.draw(e),a.alpha<=0&&u.splice(s,1)}if(e.restore(),Math.random()<S){const s=o.current[Math.floor(Math.random()*o.current.length)];c.push(new d(s,t))}p.current=requestAnimationFrame(A)};l();for(let e=0;e<F;e++){const t=o.current[Math.floor(Math.random()*o.current.length)];c.push(new d(t,n.clientWidth))}return p.current=requestAnimationFrame(A),window.addEventListener("resize",l),window.addEventListener("orientationchange",l),()=>{cancelAnimationFrame(p.current),window.removeEventListener("resize",l),window.removeEventListener("orientationchange",l)}},[]);const x=h.useMemo(()=>({display:"block",width:"100vw",height:"100dvh",margin:"0",background:R}),[]);return I.jsx("canvas",{ref:w,style:x,"aria-label":"Digit rain animation using custom font"})}export{T as default};
