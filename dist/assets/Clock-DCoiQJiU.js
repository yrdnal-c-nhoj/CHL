import{r as l,j as x}from"./index-37WBs3jL.js";const T="/assets/day-D7aIfC95.mp4",z="/assets/day-f4QIvEST.ttf",R="MyClockFont_20251120",D=new URL(z,import.meta.url).href;function _(){const y=l.useRef(null),P=l.useRef(null),b=l.useRef(null),[$,A]=l.useState(!1);return l.useEffect(()=>{new FontFace(R,`url(${D})`).load().then(t=>{document.fonts.add(t),A(!0)})},[]),l.useEffect(()=>{if(!$)return;const r=y.current,t=r.getContext("2d",{alpha:!1});t.imageSmoothingEnabled=!1;const E=P.current,d=()=>{r.width=window.innerWidth,r.height=window.innerHeight};d(),window.addEventListener("resize",d),window.addEventListener("orientationchange",d);const j=.7,w=(e,i,s,n)=>{const g=(Math.floor(i)*s+Math.floor(e))*4;return{r:n[g],g:n[g+1],b:n[g+2]}},F=()=>{const e=r.width,i=r.height,s=e/2,n=i/2;t.save(),t.translate(e,0),t.scale(-1,1),t.drawImage(E,0,0,e,i),t.restore();const M=t.getImageData(0,0,e,i).data,m=new Date,L=m.getSeconds()+m.getMilliseconds()/1e3,S=m.getMinutes()+L/60,k=m.getHours()%12+S/60,o=Math.min(e,i)*j*.5;t.textAlign="center",t.textBaseline="middle",t.font=`${o*.3}px "${R}", sans-serif`;const C=o*.85;for(let a=1;a<=12;a++){const f=a/12*Math.PI*2-Math.PI/2,h=s+Math.cos(f)*C,u=n+Math.sin(f)*C,c=w(h,u,e,M);t.fillStyle=`rgb(${255-c.r},${255-c.g},${255-c.b})`,t.save(),t.translate(h,u),t.rotate(f+Math.PI/2),t.fillText(a.toString().padStart(2,"0"),0,0),t.restore()}const p=(a,f,h)=>{const u=s+Math.cos(h)*a,c=n+Math.sin(h)*a,I=w(u,c,e,M);t.strokeStyle=`rgb(${255-I.r},${255-I.g},${255-I.b})`,t.lineWidth=Math.max(1,o*f),t.lineCap="round",t.beginPath(),t.moveTo(s,n),t.lineTo(u,c),t.stroke()};p(o*.46,.04,k*Math.PI/6-Math.PI/2),p(o*1,.025,S*Math.PI/30-Math.PI/2),p(o*1.4,.012,L*Math.PI/30-Math.PI/2);const v=w(s,n,e,M);t.fillStyle=`rgb(${255-v.r},${255-v.g},${255-v.b})`,t.beginPath(),t.arc(s,n,o*.06,0,Math.PI*2),t.fill(),b.current=requestAnimationFrame(F)};return E.play().catch(()=>{}),F(),()=>{cancelAnimationFrame(b.current),window.removeEventListener("resize",d),window.removeEventListener("orientationchange",d)}},[$]),x.jsxs(x.Fragment,{children:[x.jsx("canvas",{ref:y,style:{position:"fixed",inset:0,display:"block",zIndex:1,filter:"saturate(3) contrast(1.5) brightness(0.8)",touchAction:"none"}}),x.jsx("video",{ref:P,src:T,muted:!0,loop:!0,playsInline:!0,style:{display:"none",imageRendering:"pixelated"}})]})}export{_ as default};
