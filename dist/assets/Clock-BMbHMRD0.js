import{r,j as a}from"./index-CacFjmHR.js";const h="/assets/birds-_nYXPDLp.webp",z="/assets/twobirds-B5nt-I-F.ttf";function Y(){const p="CustomClockFont",[S,b]=r.useState(null),[L,y]=r.useState(null),[l,v]=r.useState(null),[w,f]=r.useState({left:!1,right:!1}),[j,I]=r.useState(!1),s=r.useRef({left:null,right:null,font:null}),g=r.useRef(null),[U,F]=r.useState(""),O=e=>{let t=e.getHours();const n=e.getMinutes(),o=t>=12?"PM":"AM";t=t%12,t===0&&(t=12);const i=String(n).padStart(2,"0");return`${t}${i} ${o}`};r.useEffect(()=>{const e=()=>F(O(new Date));e();const t=new Date,n=(60-t.getSeconds())*1e3-t.getMilliseconds();let o=null;const i=setTimeout(()=>{e(),o=setInterval(e,6e4)},Math.max(0,n));return()=>{clearTimeout(i),o&&clearInterval(o)}},[]),r.useEffect(()=>{let e=!1;return(async()=>{try{const t=await fetch(h,{cache:"no-store"}),n=await t.arrayBuffer(),o=t.headers.get("content-type")||"image/gif",i=new Blob([n],{type:o}),u=new Blob([n],{type:o}),c=URL.createObjectURL(i),d=URL.createObjectURL(u),k=await fetch(z,{cache:"no-store"}),C=await k.arrayBuffer(),T=k.headers.get("content-type")||"font/ttf",D=new Blob([C],{type:T}),m=URL.createObjectURL(D);if(e){URL.revokeObjectURL(c),URL.revokeObjectURL(d),URL.revokeObjectURL(m);return}s.current={left:c,right:d,font:m},b(c),y(d),v(m),f({left:!0,right:!1}),g.current=setTimeout(()=>{e||f(A=>({...A,right:!0}))},500)}catch(t){if(e)return;console.error("Fetch failed, using direct URLs:",t),b(`${h}?l=${Date.now()}`),y(`${h}?r=${Date.now()}`),f({left:!0,right:!1}),g.current=setTimeout(()=>{e||f(n=>({...n,right:!0}))},500),v(null)}})(),()=>{e=!0,g.current&&clearTimeout(g.current),s.current.left&&URL.revokeObjectURL(s.current.left),s.current.right&&URL.revokeObjectURL(s.current.right),s.current.font&&URL.revokeObjectURL(s.current.font)}},[]);const x={position:"absolute",top:0,height:"100%",width:"100%",objectFit:"cover",objectPosition:"top center",pointerEvents:"none",transition:"opacity 0ms"},$={position:"absolute",bottom:"2vh",left:0,right:0,textAlign:"center",zIndex:4,fontFamily:l?`"${p}", Menlo, Monaco, Consolas, monospace`:"Menlo, Monaco, Consolas, monospace",fontWeight:900,fontSize:"10vh",lineHeight:1,letterSpacing:"0.6vh",opacity:.9,userSelect:"none",textShadow:"0.6vh 1vh 2vh rgba(0,0,0,0.7)",transform:"perspective(80vh) rotateX(10deg) rotateY(-5deg) scale(1.02)",transformOrigin:"center bottom"},R={display:"inline-block",padding:"0 0.05em",backgroundImage:["linear-gradient(135deg, #bbbfc3 0%, #8e9499 100%)","radial-gradient(circle at 25% 30%, rgba(255,255,255,0.20) 0%, transparent 35%)","radial-gradient(circle at 70% 60%, rgba(0,0,0,0.40) 0%, transparent 45%)","radial-gradient(circle at 40% 80%, rgba(120,120,120,0.25) 0%, transparent 30%)","linear-gradient(to top, rgba(255,255,255,0.10), rgba(0,0,0,0) 60%)"].join(", "),WebkitBackgroundClip:"text",backgroundClip:"text",WebkitTextFillColor:"transparent",textShadow:["1.7vh 1.8vh 0 rgba(0,0,0,0.9)","0.28vh 0.28vh 0 rgba(255,255,255,0.6)","-0.2vh -0.2vh 0 rgba(0,0,0,0.65)","0 1.6vh 2.8vh rgba(0,0,0,0.9)"].join(", "),filter:"saturate(0.85) contrast(1.1)",opacity:.8,animation:"digitFade 1s ease forwards"},M={display:"inline-block",opacity:.6,padding:"0 0.05em"},B=()=>{I(!0)};return a.jsxs("div",{style:{width:"100vw",height:"100dvh",backgroundColor:"transparent",position:"relative",overflow:"hidden"},children:[l&&a.jsx("style",{children:`
            @font-face {
              font-family: "${p}";
              src: url("${l}") format("truetype");
              font-weight: 900;
              font-style: normal;
              font-display: swap;
            }
          `}),a.jsx("style",{children:`
          @keyframes digitFade {
            from {
              opacity: 0;
              -webkit-text-fill-color: black;
            }
            to {
              opacity: 0.8;
              -webkit-text-fill-color: transparent;
            }
          }
          @keyframes overlayFadeOut {
            from { opacity: 1; }
            to { opacity: 0; }
          }
        `}),a.jsx("div",{style:{position:"absolute",inset:0,backgroundColor:"#000",zIndex:10,pointerEvents:"none",animation:j?"overlayFadeOut 0.75s ease forwards":"none",willChange:"opacity"}}),a.jsx("img",{src:S||void 0,alt:"background",onLoad:B,style:{...x,opacity:w.left?1:0,zIndex:2}}),a.jsx("img",{src:L||void 0,alt:"reversed background",style:{...x,opacity:w.right?.5:0,transform:"scaleX(-1)",zIndex:2}}),l&&a.jsx("div",{style:$,children:Array.from(U).map((e,t)=>{if(!/[0-9A-Za-z]/.test(e))return a.jsx("span",{style:M,children:e},t);const o=(Math.random()*4-2).toFixed(2),i=(Math.random()*.2-.1).toFixed(2),u=(.95+Math.random()*.1).toFixed(2),c={...R,transform:`translateY(${i}em) rotate(${o}deg)`,filter:`${R.filter} brightness(${u})`};return a.jsx("span",{style:c,children:e},t)})})]})}export{Y as default};
