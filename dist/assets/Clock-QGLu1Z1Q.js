import{r as o,j as T}from"./index-_Zh6IFgu.js";const C="/assets/rain-90KAg8my.otf",H="/assets/fall-BEOnVvsU.webp";function P(){const g=o.useRef(null),l=o.useRef(null),a=o.useRef([]),d=o.useRef(null),M=9,y=.01,A=.15,E=2,R=2.8,p=.1,D=6.5;o.useEffect(()=>{const n=()=>{const u=new Date;let r=u.getHours()%12||12,c=u.getMinutes();a.current=`${r}${c.toString().padStart(2,"0")}`.split("")};n();const i=setInterval(n,1e3);return()=>clearInterval(i)},[]),o.useEffect(()=>{const n=g.current;if(!n)return;const i=n.getContext("2d",{alpha:!1});new FontFace("DigitFont_25_10_09",`url(${C})`).load().then(s=>document.fonts.add(s));const r=new Image;r.src=H,r.onload=()=>{d.current=r};class c{constructor(t=0,e=0){this.x=t,this.y=e}add(t){return this.x+=t.x,this.y+=t.y,this}}const w=["#DA0E0EFF","#FE6208F2","#F81010FF","#FCD80FFF","#FFEB10FF","#F71B07FF"];class F{constructor(t,e,m){this.value=t,this.pos=new c(Math.random()*e,Math.random()*-m),this.vel=new c((Math.random()-.5)*.05,Math.random()*.1),this.fontSize=Math.random()*2+2.5,this.alpha=1,this.scaleX=1,this.scaleY=1,this.rotation=Math.random()*Math.PI*2,this.rotationSpeed=(Math.random()-.5)*.02,this.color=w[Math.floor(Math.random()*w.length)]}update(t,e){this.vel.y+=M,this.vel.x=Math.sin(this.pos.y*.005)*D+(Math.random()-.5)*y,this.vel.x*=p,this.vel.y=Math.min(this.vel.y*p,R),this.pos.add(this.vel),this.rotation+=this.rotationSpeed,this.scaleX=.9+Math.sin(Date.now()*.002+this.pos.y)*.15,this.scaleY=.9+Math.cos(Date.now()*.002+this.pos.x)*.15,this.pos.y>e+10&&(this.pos.y=-10),this.pos.x>t+10&&(this.pos.x=-10),this.pos.x<-10&&(this.pos.x=t+10)}draw(t){t.save(),t.translate(this.pos.x,this.pos.y),t.rotate(this.rotation),t.scale(this.scaleX,this.scaleY),t.globalAlpha=this.alpha,t.fillStyle=this.color,t.font=`${this.fontSize}rem "DigitFont_25_10_09"`,t.textAlign="center",t.fillText(this.value,0,0),t.restore()}}const h=()=>{const s=Math.max(1,window.devicePixelRatio||1),t=n.clientWidth*s,e=n.clientHeight*s;(n.width!==t||n.height!==e)&&(n.width=t,n.height=e,i.setTransform(s,0,0,s,0,0))},f=Array.from({length:E},()=>{const s=a.current[Math.floor(Math.random()*a.current.length)];return new F(s,n.clientWidth,n.clientHeight)}),v=()=>{const s=n.clientWidth,t=n.clientHeight;if(d.current){i.clearRect(0,0,s,t);const e=d.current,m=e.naturalWidth||e.width,S=e.naturalHeight||e.height,x=t/S,I=m*x,L=t;i.drawImage(e,0,0,I,L)}else i.fillStyle="#BDE4F0FF",i.fillRect(0,0,s,t);for(let e of f)e.update(s,t),e.draw(i);if(f.length<100&&Math.random()<A){const e=a.current[Math.floor(Math.random()*a.current.length)];f.push(new F(e,s,t))}l.current=requestAnimationFrame(v)};return h(),l.current=requestAnimationFrame(v),window.addEventListener("resize",h),window.addEventListener("orientationchange",h),()=>{cancelAnimationFrame(l.current),window.removeEventListener("resize",h),window.removeEventListener("orientationchange",h)}},[]);const _=o.useMemo(()=>({display:"block",width:"100vw",height:"100dvh",margin:0}),[]);return T.jsx("canvas",{ref:g,style:_,"aria-label":"Digit leaf animation"})}export{P as default};
